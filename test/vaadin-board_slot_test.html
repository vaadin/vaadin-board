<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>vaadin-board slot` test</title>

    <script src="../../../wct-browser-legacy/browser.js"></script>
    <script src="../../../@webcomponents/webcomponentsjs/webcomponents-bundle.js"></script>
    <script type="module" src="../../../@polymer/test-fixture/test-fixture.js"></script>

    <script type="module" src="../vaadin-board.js"></script>
    <script type="module" src="../vaadin-board-row.js"></script>
    <script type="module" src="./outer.js"></script>
    <script type="module" src="./board-element.js"></script>
  </head>
  <body>
  <test-fixture id="slot-board-row">
    <template>
      <board-element>
        <div>top A</div>
        <div>top B</div>
        <div>top C</div>
        <div>top D</div>
      </board-element>
    </template>
  </test-fixture>

  <test-fixture id="slot-board-row-with-slot-child">
    <template>
      <board-element>
        <outer-element>
          <div>top A</div>
        </outer-element>
        <outer-element>
          <div>top B</div>
        </outer-element>
        <outer-element>
          <div>top C</div>
        </outer-element>
        <outer-element>
          <div>top D</div>
        </outer-element>
      </board-element>
    </template>
  </test-fixture>

    <script type="module">
import '@polymer/test-fixture/test-fixture.js';
import '../vaadin-board.js';
import '../vaadin-board-row.js';
import './outer.js';
import './board-element.js';
import { useShadow } from '@polymer/polymer/lib/utils/settings.js';
suite('vaadin-board-with-slotted-element', function (done) {

  test('Inner items have 25% flex css.', function () {

    // Test was failing in Chrome because of this bug in Shadydom:
    // https://github.com/webcomponents/shadydom/issues/168
    // TODO Remove when the issue is fixed.
    if (!useShadow) {
      return;
    }
    var boardElement = fixture('slot-board-row');
    var children = boardElement.querySelectorAll("div");
    for (let i = 0; i < children.length; i++) {
      var child = children[i];

      assert.isAtLeast(child.getAttribute("style").indexOf("flex-basis: 25%"), 0,
              "Row children have flex-basis: 25% style");
    }
  });

  test('Slot tag inside board child elements, does not effect number of board children.', function () {

    // Test was failing in Chrome because of this bug in Shadydom:
    // https://github.com/webcomponents/shadydom/issues/168
    // TODO Remove when the issue is fixed.
    if (!useShadow) {
      return;
    }
    var boardElement = fixture('slot-board-row-with-slot-child');
    assert.equal(boardElement.childElementCount, 4, "There are exactly 4 children");
  });
});
</script>
  </body>
</html>
